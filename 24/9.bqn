fsâ†'0'-ËœÂ¯1â†“â€¢file.Chars"9.in"
filesâ€¿space â† <Ë˜â‰ â†‘â€¿2 â¥Š fs
# this is smarter but doesn't work :(
taken â† (âŠ¢ Ã— (âŒ½files) â‰¥ 2 Ã·Ëœ âŠ¢) ((+Â´space) âŒŠ âŠ¢)âŒ¾(+`) âŒ½files
fills â† (Â¯1+â‰ files) - space âŠ”â—‹/ taken
left  â† âŠ”Ëœ / files - âŒ½((1â€¿0 Ã— âŠ¢)âŒ¾(2â€¿âˆ˜ â¥Š âŠ¢)) taken
n â† left âŒˆâ—‹â‰  fills
blocks â† âˆ¾ left âˆ¾Â¨â—‹((â‰ fs)â†‘âŠ¢) fills
checksum â† +Â´ blocks Ã— â†•â‰ blocks

# this is stupid but works fine
exp â† (âŒŠÃ·âŸœ2)âŒ¾((/0=2|sa)âŠâŠ¢) '.'Â¨âŒ¾((/2|sa)âŠâŠ¢) sa â† fs / â†•â‰ fs
C â† (âŠ‘âˆ˜/ â‹ˆ Â¯1 âŠ‘ /âˆ˜Â¬) '.' = âŠ¢
S â† {xâ†C ğ•©â‹„ âŒ½âŒ¾(xâŠâŠ¢) ğ•©}
Compact â† S â€¢_while_ (<Â´C)
ChkSum â† (+Â´âŠ¢Ã—â†•âˆ˜â‰ ) {0Â¨âŒ¾(('.'=ğ•©)âŠ¸/) ğ•©}
P1 â† ChkSum Compact

P2 â† {ğ•ŠÂ·:
  e â† exp  
  (âŒ½â†•â‰ files) {
    idğ•Šsize:
      â€¢Show id
      src  â† / id = e
      gaps â† ((âŠ‘src) > âŠ¢)âŠ¸/ / (sizeâ¥Š'.') â· e
      { 0â‰ â‰ gaps ?  
        sel â† ((â†•size) + âŠ‘gaps) âˆ¾ src 
        e (size âŒ½ âŠ¢) âŒ¾ (sel âŠ âŠ¢) â†©
        ; 
        @ }
  }Â¨ âŒ½files 
  e
}
